<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<title>Hello MUI</title>
		<meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<link rel="stylesheet" href="css/mui.min.css">
<style type="text/css">
body {
	background-color: #efefef;
}
#CalendarMain {
	width: 300px;
	height: 300px;
	border: 0px solid #ccc;
	margin: 0 auto;
	margin-top: 8px;
	
}
#title {
	width: 100%;
	height: 30px;
	background-color: cornflowerblue;
}
.selectBtn {
	font-weight: 900;
	font-size: 15px;
	color: #fff;
	cursor: pointer;
	text-decoration: none;
	padding: 7px 10px 6px 10px;
}
.selectBtn:hover {
	background-color: #1d953f;
}
.selectYear {
	float: left;
	margin-left: 50px;
	position: absolute;
}
.selectMonth {
	float: left;
	margin-left: 120px;
	position: absolute;
}
.month {
	float: left;
	position: absolute;
}
.nextMonth {
	float: right;
}
.currentDay {
	float: right;
}
#context {
	background-color: cornflowerblue;
	width: 100%;
}
.week {
	width: 100%;
	height: 30px;
}
.week>h3 {
	float: left;
	color: white ;
	text-align: center;
	margin: 0;
	padding: 0;
	margin-top: 5px;
	font-size: 16px;
}
.dayItem {
	float: left;
}
.lastItem {
	color: #d1c7b7 !important;	
}
.item {
	color: #fff;
	float: left;
	text-align: center;
	cursor: pointer;
	margin: 0;
	font-family: "微软雅黑";
	font-size: 13px;
	width: 42px; line-height: 34px; height: 34px;

	
}
.item:hover {
	color: #fff;
}
.currentItem {
	background-color: #b9121b;
	width: 42px;
	line-height: 34px;
	float: left;
	-webkit-border-radius: 50%;
	-moz-border-radius: 50%;
	border-radius: 50%;
	color: #fff;.
}

.reddot {
	background-color: red;
	width: 6px;
	line-height: 6px;
	float: left;
	-webkit-border-radius: 50%;
	-moz-border-radius: 50%;
	border-radius: 50%;
	color: red;
	margin-top: -8px;
	margin-left: 19px;
	font-size: 1px;
}

.reddot_hide {
	visibility: hidden;
	background-color: red;
	width: 6px;
	line-height: 6px;
	float: left;
	-webkit-border-radius: 50%;
	-moz-border-radius: 50%;
	border-radius: 50%;
	color: red;
	margin-top: -8px;
	margin-left: 19px;
	font-size: 1px;
}


.currentSelItem {
	background-color: darkgray;
	width: 42px;
	line-height: 34px;
	float: left;
	-webkit-border-radius: 50%;
	-moz-border-radius: 50%;
	border-radius: 50%;
	color: #fff;.
}

.dataItem>a {
	
	width: 25px;
	line-height: 34px;
	float: left;
	-webkit-border-radius: 50%;
	-moz-border-radius: 50%;
	border-radius: 50%;
	color: #fff;

}


#foots {
	width: 100%;
	height: 0px;
	background-color: red;
	border-top: 0px solid #ccc;
	margin-top: -1px;
	visibility: hidden;
	
}
#footNow {
	float: left;
	margin: 6px 0 0 5px;
	color: white;
	font-family: "微软雅黑";
	visibility: hidden;
}
#Container {
	overflow: hidden;
	float: left;
}
#center {
	width: 100%;
	overflow: hidden;
}
#centerMain {
	width: 300%;
	margin-left: -100%;
}
#selectYearDiv {
	float: left;
	background-color: cornflowerblue;
}
#selectYearDiv>div {
	float: left;
	text-align: center;
	font-family: "微软雅黑";
	font-size: 16px;
	border: 0px solid #ccc;
	margin-left: -1px;
	margin-top: -1px;
	cursor: pointer;
	color: white;
}
.currentYearSd, .currentMontSd {
	color: #ff4400 !important;
}
#selectMonthDiv {
	float: left;
	background-color: cornflowerblue;
}
#selectMonthDiv>div {
	color: white;
	float: left;
	text-align: center;
	font-family: "微软雅黑";
	font-size: 16px;
	border: 0px solid #ccc;
	margin-left: -1px;
	margin-top: -1px;
	cursor: pointer;
	background-color: black);
}
#selectYearDiv>div:hover, #selectMonthDiv>div:hover {
	background-color: #efefef;
}
#centerCalendarMain {
	float: left;
}


.iw {width:42px;float:left;color: #fff;margin-top: 3px;margin-bottom: 3px;text-align: center;}
.gray {color: darkgray;};
.iwh{width: 42px; line-height: 34px; height: 34px;};

.mtblock{margin-top: 8px;};
</style>
		
	</head>

	<body>
<div id="Demo" style="background-color: cornflowerblue;margin: 0;">
	<div id="CalendarMain"style="height: 280px;">
		<div id="title" style="height: 36px;">
			<a class="selectBtn month" href="javascript:" onclick="CalendarHandler.CalculateLastMonthDays();">&lt;</a>
			<a class="selectBtn selectYear" href="javascript:" onclick="CalendarHandler.CreateSelectYear(CalendarHandler.showYearStart);">2017年</a>
			<a class="selectBtn selectMonth" onclick="CalendarHandler.CreateSelectMonth()">3月</a> 
			<a class="selectBtn nextMonth" href="javascript:" onclick="CalendarHandler.CalculateNextMonthDays();">&gt;</a>
			<a class="selectBtn currentDay" href="javascript:" onclick="CalendarHandler.CreateCurrentCalendar(0,0,0);" style="display: none;">今天</a>
		</div>
		<div id="context" style="height: 230px;">
			<!--
			<div class="week">
				<div class="iw gray">日</div>
				<div class="iw">一</div>
				<div class="iw">二</div>
				<div class="iw">三</div>
				<div class="iw">四</div>
				<div class="iw">五</div>
				<div class="iw gray">六</div>
			
			</div>
		-->
			<div id="center" style="height:250px;">
				<div id="centerMain">
					<div id="selectYearDiv" style="height: 200px; width: 300px;"></div>
					<div id="centerCalendarMain" style="height: 200px;width: 294px;">
						<div class="iw gray">日</div>
						<div class="iw">一</div>
						<div class="iw">二</div>
						<div class="iw">三</div>
						<div class="iw">四</div>
						<div class="iw">五</div>
						<div class="iw gray">六</div>						
						<div class="item " onclick="go(this);"><div class="lastItem">27</div><div class="reddot_hide">d</div></div>
						<div class="item " onclick="go(this);"><div>28</div><div class="reddot">d</div></div>
						<div class="item " onclick="go(this);"><div class="currentItem">1</div><div class="reddot">d</div></div>
						<div class="item " onclick="go(this);"><div class="lastItem">2</div><div class="reddot_hide">d</div></div>
						<div class="item " onclick="go(this);"><div class="lastItem">3</div><div class="reddot_hide">d</div></div>
						<div class="item " onclick="go(this);"><div class="lastItem">4</div><div class="reddot_hide">d</div></div>
						<div class="item " onclick="go(this);"><div class="lastItem">5</div><div class="reddot_hide">d</div></div>
						<div class="item " onclick="go(this);"><div class="lastItem">6</div><div class="reddot_hide">d</div></div>
						<div class="item " onclick="go(this);"><div class="lastItem">7</div><div class="reddot_hide">d</div></div>
						<div class="item " onclick="go(this);"><div class="lastItem">8</div><div class="reddot_hide">d</div></div>
						<div class="item " onclick="go(this);"><div class="lastItem">9</div><div class="reddot_hide">d</div></div>
						<div class="item " onclick="go(this);"><div class="lastItem">10</div><div class="reddot_hide">d</div></div>
						<div class="item " onclick="go(this);"><div class="lastItem">11</div><div class="reddot_hide">d</div></div>
						<div class="item " onclick="go(this);"><div class="lastItem">12</div><div class="reddot_hide">d</div></div>
						<div class="item " onclick="go(this);"><div class="lastItem">13</div><div class="reddot_hide">d</div></div>
						<div class="item " onclick="go(this);"><div class="lastItem">14</div><div class="reddot_hide">d</div></div>
						<div class="item " onclick="go(this);"><div class="lastItem">15</div><div class="reddot_hide">d</div></div>
						<div class="item " onclick="go(this);"><div class="lastItem">16</div><div class="reddot_hide">d</div></div>
						<div class="item " onclick="go(this);"><div class="lastItem">17</div><div class="reddot_hide">d</div></div>
						<div class="item " onclick="go(this);"><div class="lastItem">18</div><div class="reddot_hide">d</div></div>
						<div class="item " onclick="go(this);"><div class="lastItem">19</div><div class="reddot_hide">d</div></div>
						<div class="item " onclick="go(this);"><div class="lastItem">20</div><div class="reddot_hide">d</div></div>
						<div class="item " onclick="go(this);"><div class="lastItem">21</div><div class="reddot_hide">d</div></div>
						<div class="item " onclick="go(this);"><div class="lastItem">22</div><div class="reddot_hide">d</div></div>
						<div class="item " onclick="go(this);"><div class="lastItem">23</div><div class="reddot_hide">d</div></div>
						<div class="item " onclick="go(this);"><div class="lastItem">24</div><div class="reddot_hide">d</div></div>
						<div class="item " onclick="go(this);"><div class="lastItem">25</div><div class="reddot_hide">d</div></div>
						<div class="item " onclick="go(this);"><div class="lastItem">26</div><div class="reddot_hide">d</div></div>
						<div class="item " onclick="go(this);"><div class="lastItem">27</div><div class="reddot_hide">d</div></div>
						<div class="item " onclick="go(this);"><div class="lastItem">28</div><div class="reddot_hide">d</div></div>
						<div class="item " onclick="go(this);"><div class="lastItem">29</div><div class="reddot_hide">d</div></div>
						<div class="item " onclick="go(this);"><div class="lastItem">30</div><div class="reddot_hide">d</div></div>
						<div class="item " onclick="go(this);"><div class="lastItem">31</div><div class="reddot_hide">d</div></div>
						<div class="item " onclick="go(this);"><div class="lastItem">1</div><div class="reddot_hide">d</div></div>
						<div class="item " onclick="go(this);"><div class="lastItem">2</div><div class="reddot_hide">d</div></div>
						<div class="item " onclick="go(this);"><div class="lastItem">3</div><div class="reddot_hide">d</div></div>
						<div class="item " onclick="go(this);"><div class="lastItem">4</div><div class="reddot_hide">d</div></div>
						<div class="item " onclick="go(this);"><div class="lastItem">5</div><div class="reddot_hide">d</div></div>
						<div class="item " onclick="go(this);"><div class="lastItem">6</div><div class="reddot_hide">d</div></div>
						<div class="item " onclick="go(this);"><div class="lastItem">7</div><div class="reddot_hide">d</div></div>
						<div class="item " onclick="go(this);"><div class="lastItem">8</div><div class="reddot_hide">d</div></div>
						<div class="item " onclick="go(this);"><div class="lastItem">9</div><div class="reddot_hide">d</div></div>
					</div>
					<div id="selectMonthDiv" style="height: 200px; width: 300px;"></div>
				</div>
			</div>
		</div>
	</div>
</div>
<div id="taskitems">
	
</div>
<div id="taskitems_copy" style="visibility: hidden;">
	<div class="mui-card mtblock" style="margin-top: 6px;margin-left: 3px;margin-right: 3px;">
		<!--页眉，放置标题-->
		<div class="mui-card-header" style="margin-left: 6px; margin-top: 6px;">页眉</div>
		<!--内容区-->
		<div class="mui-card-content" style="margin-left: 6px; margin-top: 6px;">内容区</div>
		<!--页脚，放置补充信息或支持的操作-->
		<div class="mui-card-footer" style="margin-left: 6px; margin-top: 6px;margin-bottom: 6px;">页脚</div>
	</div>
</div>
		<script src="js/mui.min.js"></script>
		<script src="js/jquery.js"></script>
		<script src="js/app.js"></script>

		<script>
			mui.init({
				pullRefresh: {
					container: '#pullrefresh',
					down: {
						callback: pulldownRefresh
					},
					up: {
						contentrefresh: '正在加载...',
						callback: pullupRefresh
					}
				}
			});
			/**
			 * 下拉刷新具体业务实现
			 */
			function pulldownRefresh() {
				setTimeout(function() {
					var table = document.body.querySelector('.mui-table-view');
					var cells = document.body.querySelectorAll('.mui-table-view-cell');
					for (var i = cells.length, len = i + 3; i < len; i++) {
						var li = document.createElement('li');
						li.className = 'mui-table-view-cell';
						li.innerHTML = '<a class="mui-navigate-right">Item ' + (i + 1) + '</a>';
						//下拉刷新，新纪录插到最前面；
						table.insertBefore(li, table.firstChild);
					}
					mui('#pullrefresh').pullRefresh().endPulldownToRefresh(); //refresh completed
				}, 1500);
			}
			var count = 0;
			/**
			 * 上拉加载具体业务实现
			 */
			function pullupRefresh() {
				return;
				setTimeout(function() {
					mui('#pullrefresh').pullRefresh().endPullupToRefresh((++count > 2)); //参数为true代表没有更多数据了。
					var table = document.body.querySelector('.mui-table-view');
					var cells = document.body.querySelectorAll('.mui-table-view-cell');
					for (var i = cells.length, len = i + 20; i < len; i++) {
						var li = document.createElement('li');
						li.className = 'mui-table-view-cell';
						li.innerHTML = '<a class="mui-navigate-right">Item ' + (i + 1) + '</a>';
						table.appendChild(li);
					}
				}, 1500);
			}
			if (mui.os.plus) {
				mui.plusReady(function() {
					//setTimeout(function() {
					//	mui('#pullrefresh').pullRefresh().pullupLoading();
					//}, 1000);

				});
			} else {
				mui.ready(function() {
					//mui('#pullrefresh').pullRefresh().pullupLoading();
				});
			}
		</script>
		
<script type="text/javascript">
	var curobj = null;
		$(document).ready(function(e) {
			//return;
			CalendarHandler.initialize();
		});

		var CalendarHandler = {
			currentYear: 0,
			currentMonth: 0,
			selday:0,
			curday:0,
			efstartidx:0,
			efendidx:0,
			isRunning: false,
			showYearStart:2009,
			tag:0,
			initialize: function() {
				var now = new Date();
				this.currentYear = now.getFullYear();
				this.currentMonth = now.getMonth() + 1;
				$calendarItem = this.CreateCalendar(now.getFullYear(), now.getMonth()+1, now.getDate());
			},
			CreateSelectYear: function(showYearStart) {
				CalendarHandler.showYearStart=showYearStart;
				$(".currentDay").show();
				$("#selectYearDiv").children().remove();
				var yearindex = 0;
				for (var i = showYearStart; i < showYearStart+12; i++) {
					yearindex++;
					if(i==showYearStart){
						$last=$("<div>往前</div>");
						$("#selectYearDiv").append($last);
						$last.click(function(){
							CalendarHandler.CreateSelectYear(CalendarHandler.showYearStart-10);
						});
						continue;
					}
					if(i==showYearStart+11){
						$next=$("<div>往后</div>");
						$("#selectYearDiv").append($next);
						$next.click(function(){
							CalendarHandler.CreateSelectYear(CalendarHandler.showYearStart+10);
						});
						continue;
					}
					
					if (i == this.currentYear) {
						$yearItem=$("<div class=\"currentYearSd\" id=\"" + yearindex + "\">" + i + "</div>")
					
					}
					else{
						 $yearItem=$("<div id=\"" + yearindex + "\">" + i + "</div>");
					}
					$("#selectYearDiv").append($yearItem);
					$yearItem.click(function(){
						$calendarItem=CalendarHandler.CreateCalendar(Number($(this).html()),1,1);
						//$("#Container").append($calendarItem);
						//CalendarHandler.CSS()
					    //CalendarHandler.isRunning = true;
					    //$($("#Container").find(".dayItem")[0]).animate({
						//height: "0px"
					    //}, 300, function() {
						//$(this).remove();
						//CalendarHandler.isRunning = false;
					    //});
						$("#centerMain").animate({
						marginLeft: -$("#center").width() + "px"
					}, 500);
					});
					if (yearindex == 1 || yearindex == 5 || yearindex == 9) $("#selectYearDiv").find("#" + yearindex).css("border-left-color", "#fff");
					if (yearindex == 4 || yearindex == 8 || yearindex == 12) $("#selectYearDiv").find("#" + yearindex).css("border-right-color", "#fff");
					
				}
				$("#selectYearDiv>div").css("width", ($("#center").width() - 4) / 4 + "px").css("line-height", ($("#center").height() - 4) / 3 + "px");
				$("#centerMain").animate({
					marginLeft: "0px"
				}, 300);
			},
			CreateSelectMonth: function() {
				$(".currentDay").show();
				$("#selectMonthDiv").children().remove();
				for (var i = 1; i < 13; i++) {
					if (i == this.currentMonth) $monthItem=$("<div class=\"currentMontSd\" id=\"" + i + "\">" + i + "月</div>");
					else  $monthItem=$("<div id=\"" + i + "\">" + i + "月</div>");
					$("#selectMonthDiv").append($monthItem);
					$monthItem.click(function(){
						$calendarItem=CalendarHandler.CreateCalendar(CalendarHandler.currentYear,Number($(this).attr("id")),1);
						//$("#Container").append($calendarItem);
						//CalendarHandler.CSS()
						//$("#selectMonthDiv").hide();
						//return;
					    //CalendarHandler.isRunning = true;
					   // $($("#Container").find(".dayItem")[0]).animate({
						//height: "0px"
					   // }, 300, function() {
						//$(this).remove();
						//CalendarHandler.isRunning = false;
					   // });
						$("#centerMain").animate({
							marginLeft: -$("#center").width() + "px"
						}, 500);
					});
					if (i == 1 || i == 5 || i == 9) $("#selectMonthDiv").find("#" + i).css("border-left-color", "#fff");
					if (i == 4 || i == 8 || i == 12) $("#selectMonthDiv").find("#" + i).css("border-right-color", "#fff");
				}
				$("#selectMonthDiv>div").css("width", ($("#center").width() - 4) / 4 + "px").css("line-height", ($("#center").height() - 4) / 3 + "px");
				$("#centerMain").animate({
					marginLeft: -$("#center").width() * 2 + "px"
				}, 300);
			},
			IsRuiYear: function(aDate) {
				return (0 == aDate % 4 && (aDate % 100 != 0 || aDate % 400 == 0));
			},
			CalculateWeek: function(y, m, d) {
				var arr = "7123456".split("");
				with(document.all) {
					var vYear = parseInt(y, 10);
					var vMonth = parseInt(m, 10);		
					var vDay = parseInt(d, 10);
				}
				var week =arr[new Date(y,m-1,vDay).getDay()];
				return week;
			},
			CalculateMonthDays: function(m, y) {
				var mDay = 0;
				if (m == 0 || m == 1 || m == 3 || m == 5 || m == 7 || m == 8 || m == 10 || m == 12) {
					mDay = 31;
				} else {
					if (m == 2) {
						//判断是否为芮年
						var isRn = this.IsRuiYear(y);
						if (isRn == true) {
							mDay = 29;
						} else {
							mDay = 28;
						}
					} else {
						mDay = 30;
					}
				}
				return mDay;
			},
			CreateCalendar: function(y, m, d) {
				console.log(y + "-" + m + "-" + d );
				//获取当前月份的天数
				var nowDate = new Date();
				if(y==nowDate.getFullYear()&&m==nowDate.getMonth()+1||(y==0&&m==0)) $(".currentDay").hide();
				var nowYear = y == 0 ? nowDate.getFullYear() : y;
				this.currentYear = nowYear;
				var nowMonth = m == 0 ? nowDate.getMonth() + 1 : m;
				this.currentMonth = nowMonth;
				var nowDay = d == 0 ? nowDate.getDate() : d;
				$(".selectYear").html(nowYear + "年");
				$(".selectMonth").html(nowMonth + "月");
				var firstDay = new Date();
				firstDay.setDate(1);
				firstDay.setYear(nowYear);
				firstDay.setMonth(nowMonth-1);
				var maxDay = new Date(firstDay);
				maxDay.setDate(0);
				var preDay = new Date(firstDay);
				preDay.setDate(0);
				
				var cd = $("#centerCalendarMain").children();
				//console.log(cd[firstDay.getDay()].innerHTML + " - " + firstDay.getDay() + firstDay.toString());
				var j = 1;
				var startidx = firstDay.getDay();
				var i = 0;
				j = preDay.getDate() - startidx + 1 ;
				var preDay0 = new Date(preDay) ;//new Date(preDay - (startidx -1) * 24*60*60*1000);
				preDay0.setDate(preDay.getDate() - (startidx -1));
				for( i = 7; i < 7+startidx; i++){
					cd[i].children[0].innerHTML = preDay0.getDate();
					cd[i].children[0].className = "lastItem"
					cd[i].children[1].className = "reddot_hide"
					console.log(preDay0.getFullYear() + "-" +(preDay0.getMonth() + 1) + "-" + preDay0.getDate() +" "+ preDay0.getHours());
					$(cd[i]).attr("data-mydate",preDay0);
					preDay0.setDate(preDay0.getDate() + 1);
					j++;					
				}
				
				
				j = 1;
				i = startidx ;
				var nowday = nowDate.getDate();
				this.efstartidx = startidx;
				for(i = startidx + 7;i < 7 + startidx + maxDay.getDate() -1; i++){
					//cd[i].className = "item dateItem";
					cd[i].children[0].innerHTML = preDay0.getDate();
					cd[i].children[0].className = "";
					//removeClass(cd[i],"lastItem");
					if(j == nowday){
						this.curday = nowday;
						cd[i].children[0].className = "currentItem";// innerHTML = "<a>" + j + "</a><div class='reddot'>d</div>";	
						
						//cd[i].className = "item currentItem";
						//console.log(cd[i].parentNode.parentNode.innerHTML)
						//addClass(cd[i],"currentItem");
						curobj = cd[i];
						
					}
					console.log(preDay0.getFullYear() + "-" +(preDay0.getMonth() + 1) + "-" + preDay0.getDate() +" "+ preDay0.getHours());
					$(cd[i]).attr("data-mydate",preDay0);
					preDay0.setDate(preDay0.getDate() + 1);
					
					j++;
				}
				//return;
				this.efendidx = i -7;
				j = 1;
				for(; i < 42 + 7; i++){
					cd[i].children[0].innerHTML = preDay0.getDate();
					console.log(preDay0.getFullYear() + "-" +(preDay0.getMonth() + 1) + "-" + preDay0.getDate() +" "+ preDay0.getHours());
					$(cd[i]).attr("data-mydate",preDay0);
					preDay0.setDate(preDay0.getDate() + 1);					
					j++;
				}
				$(curobj).trigger("create");
				
				//curobj.click();
				return "";
			},
			CSS: function() {
				var itemPaddintTop = $("#centerCalendarMain").height() / 6;
				$(".item").css({
					"width": $(".week").width() / 7 + "px",
					"line-height": itemPaddintTop + "px",
					"height": itemPaddintTop + "px"
				});
				$(".currentItem>a").css("margin-left", ($(".item").width() - 25) / 2 + "px").css("margin-top", ($(".item").height() - 25) / 2 + "px");
			},
			CalculateNextMonthDays: function() {
				if (this.isRunning == false) {
					$(".currentDay").show();
					var m = this.currentMonth == 12 ? 1 : this.currentMonth + 1;
					var y = this.currentMonth == 12 ? (this.currentYear + 1) : this.currentYear;
					var d = 0;
					var nowDate = new Date();
					if (y == nowDate.getFullYear() && m == nowDate.getMonth() + 1) d = nowDate.getDate();
					else d = 1;
					$calendarItem = this.CreateCalendar(y, m, d);
					console.log("" + y + m + d);
					//$("#Container").append($calendarItem);
					return;
					this.CSS();
					return;
					this.isRunning = true;
					$($("#Container").find(".dayItem")[0]).animate({
						height: "0px"
					}, 300, function() {
						$(this).remove();
						CalendarHandler.isRunning = false;
					});
				}
			},
			CalculateLastMonthDays: function() {
				if (this.isRunning == false) {
					$(".currentDay").show();
					var nowDate = new Date();					
					var m = this.currentMonth == 1 ? 12 : this.currentMonth - 1;
					var y = this.currentMonth == 1 ? (this.currentYear - 1) : this.currentYear;
					var d = 0;
					
					if (y == nowDate.getFullYear() && m == nowDate.getMonth() + 1) d = nowDate.getDate();
					else d = 1;
					$calendarItem = this.CreateCalendar(y, m, d);
					return;
					//$("#Container").append($calendarItem);
					var itemPaddintTop = $(".dayItem").height() / 6;
					this.CSS();
					this.isRunning = true;
					$($("#Container").find(".dayItem")[0]).animate({
						height: "0px"
					}, 300, function() {
						$(this).remove();
						CalendarHandler.isRunning = false;
					});
				}
			},
			CreateCurrentCalendar: function() {
				if (this.isRunning == false) {
					$(".currentDay").hide();
					var nowdate = new Date();
					$calendarItem = this.CreateCalendar(nowdate.getFullYear(), nowdate.getMonth() + 1, nowdate.getDate());
					//$("#Container").append($calendarItem);
					return;
					this.isRunning = true;
					$($("#Container").find(".dayItem")[0]).animate({
						height: "0px"
					}, 300, function() {
						$(this).remove();
						CalendarHandler.isRunning = false;
					});
					this.CSS();
					$("#centerMain").animate({
						marginLeft: -$("#center").width() + "px"
					}, 500);
				}
			},
			RunningTime: function() {
				var mTiming = setInterval(function() {
					var nowDate = new Date();
					var h=nowDate.getHours()<10?"0"+nowDate.getHours():nowDate.getHours();
					var m=nowDate.getMinutes()<10?"0"+nowDate.getMinutes():nowDate.getMinutes();
					var s=nowDate.getSeconds()<10?"0"+nowDate.getSeconds():nowDate.getSeconds();
					var nowTime = h + ":" + m + ":" + s;
					$("#footNow").html(nowTime);
				}, 1000);

			}
		}
		
		function go(obj){
			CalendarHandler.selday = obj.children[0].innerText;
			console.log(JSON.stringify(CalendarHandler));
			var objs = obj.parentNode.children;
			for(var i = CalendarHandler.efstartidx + 7; i < CalendarHandler.efendidx + 7; i++){
				console.log(objs[i].innerHTML);
				if(objs[i].children[0].innerText == CalendarHandler.curday){
					//objs[i].className = "item currentItem";
					//objs[i].toggleClass(currentItem);
					//objs[i].children[0].className= "currentItem";
				}else if(objs[i].innerText == obj.innerText){
					//objs[i].innerHTML = "<a>" + obj.innerText + "</a>";
					//objs[i].className = "item currentSelItem";
					objs[i].children[0].className= "currentSelItem";
					
				}else{
					//objs[i].innerHTML = objs[i].innerText ;
					//objs[i].className = "item dataItem";.
					objs[i].children[0].className= "";
				}
				$(objs[i]).trigger("create");
			}
			//console.log(obj.parentNode.innerHTML);
			var stm = CalendarHandler.currentYear + "-" + CalendarHandler.currentMonth + "-" + CalendarHandler.selday;// + "00:00:00";
			var etm = CalendarHandler.currentYear + "-" + CalendarHandler.currentMonth + "-" + (parseInt(CalendarHandler.selday) + 1);// + "23:59:59";
			console.log(stm + " - " + etm);
			//console.log(window.app.gettaskurl());
			mui.ajax(window.app.gettaskurl(), {
				data:{ 'action': 'getFineIrriPlanList','stm':stm,'etm':etm},
				dataType: 'json', //服务器返回json格式数据
				type: 'get', //HTTP请求类型
				timeout: 60000, //超时时间设置为10秒；
				cache:false,
				success: function(data,status,xhr) {//服务器返回响应，根据响应结果，分析是否登录成功；
					console.log(JSON.stringify(data));
					$("#taskitems").empty();
					for(var i = 0; i < data.total; i++){
						var subitems =  $("#taskitems_copy").children().children();
						subitems[0].innerText = data.rows[i].TITLE;
						//console.log(subitems.length);
						subitems[1].innerText = data.rows[i].STM + " - " + data.rows[i].ETM;
						subitems[2].innerText = data.rows[i].SGNM + " - " + data.rows[i].BGNM;
						$("#taskitems").append($("#taskitems_copy").html());
						//console.log("dd");
					}
					//console.log($("#taskitems").html());
				},
				error: function(xhr, type, errorThrown) {
					console.log(app.gettaskurl() +  errorThrown);
					//异常处理；
					//plus.nativeUI.closeWaiting();
					//plus.nativeUI.toast('网络遇到问题，请检测(' +type + ')');
					return;
				}
			});					
			
			//obj.className = "item currentSelItem";
			//console.log(obj.parentNode.innerHTML);
			//alert(obj.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.innerHTML);
			//console.log(obj.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.innerHTML);
			//console.log(CalendarHandler.currentMonth + CalendarHandler.selday);
		}
		</script>
		
		
	</body>

</html>